(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1287:function(e,r,n){"use strict";n.r(r),n.d(r,"default",function(){return JpegDecoder});r=n(688);const B=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),k=4017,g=799,A=3406,y=2276,P=1567,C=3784,T=5793,x=2896;function buildHuffmanTable(n,t){let a=0;const o=[];let e=16;for(;0<e&&!n[e-1];)--e;o.push({children:[],index:0});let s=o[0],i;for(let r=0;r<e;r++){for(let e=0;e<n[r];e++){for((s=o.pop()).children[s.index]=t[a];0<s.index;)s=o.pop();for(s.index++,o.push(s);o.length<=r;)o.push(i={children:[],index:0}),s.children[s.index]=i.children,s=i;a++}r+1<e&&(o.push(i={children:[],index:0}),s.children[s.index]=i.children,s=i)}return o[0].children}function decodeScan(r,e,n,t,a,l,f,o,d){const{mcusPerLine:s,progressive:i}=n;var c=e;let u=e,h=0,m=0;function readBit(){if(0<m)return m--,h>>m&1;if(255===(h=r[u++])){var e=r[u++];if(e)throw new Error("unexpected marker: "+(h<<8|e).toString(16))}return m=7,h>>>7}function decodeHuffman(e){let r=e;for(var n;null!==(n=readBit());){if("number"==typeof(r=r[n]))return r;if("object"!=typeof r)throw new Error("invalid huffman sequence")}return null}function receive(e){let r=e,n=0;for(;0<r;){var t=readBit();if(null===t)return;n=n<<1|t,--r}return n}function receiveAndExtend(e){var r=receive(e);return 1<<e-1<=r?r:r+(-1<<e)+1}let p=0;let v=0,b;var w,k=t.length;let g,A,y,P,C,T,x=(T=i?0===l?0===o?function decodeDCFirst(e,r){var n=0===(n=decodeHuffman(e.huffmanTableDC))?0:receiveAndExtend(n)<<d;e.pred+=n,r[0]=e.pred}:function decodeDCSuccessive(e,r){r[0]|=readBit()<<d}:0===o?function decodeACFirst(r,n){if(0<p)p--;else{let e=l;for(var t=f;e<=t;){var a=decodeHuffman(r.huffmanTableAC),o=15&a,a=a>>4;if(0==o){if(a<15){p=receive(a)+(1<<a)-1;break}e+=16}else e+=a,n[B[e]]=receiveAndExtend(o)*(1<<d),e++}}}:function decodeACSuccessive(e,r){let n=l;var t=f;let a=0;for(;n<=t;){var o=B[n],s=r[o]<0?-1:1;switch(v){case 0:var i=decodeHuffman(e.huffmanTableAC),c=15&i;if(a=i>>4,0==c)v=a<15?(p=receive(a)+(1<<a),4):(a=16,1);else{if(1!=c)throw new Error("invalid ACn encoding");b=receiveAndExtend(c),v=a?2:3}continue;case 1:case 2:r[o]?r[o]+=(readBit()<<d)*s:0===--a&&(v=2===v?3:0);break;case 3:r[o]?r[o]+=(readBit()<<d)*s:(r[o]=b<<d,v=0);break;case 4:r[o]&&(r[o]+=(readBit()<<d)*s)}n++}4===v&&0===--p&&(v=0)}:function decodeBaseline(e,r){var n=0===(n=decodeHuffman(e.huffmanTableDC))?0:receiveAndExtend(n);e.pred+=n,r[0]=e.pred;let t=1;for(;t<64;){var a=decodeHuffman(e.huffmanTableAC),o=15&a,a=a>>4;if(0==o){if(a<15)break;t+=16}else t+=a,r[B[t]]=receiveAndExtend(o),t++}},0),U;U=1===k?t[0].blocksPerLine*t[0].blocksPerColumn:s*n.mcusPerColumn;for(var E=a||U;x<U;){for(A=0;A<k;A++)t[A].pred=0;if(p=0,1===k)for(g=t[0],C=0;C<E;C++)!function decodeBlock(e,r,n){var t=n/e.blocksPerLine|0,n=n%e.blocksPerLine;r(e,e.blocks[t][n])}(g,T,x),x++;else for(C=0;C<E;C++){for(A=0;A<k;A++){var{h:D,v:L}=g=t[A];for(y=0;y<L;y++)for(P=0;P<D;P++)!function decodeMcu(e,r,n,t,a){var o=n/s|0,n=n%s,o=o*e.v+t,t=n*e.h+a;r(e,e.blocks[o][t])}(g,T,x,y,P)}if(++x===U)break}if(m=0,(w=r[u]<<8|r[u+1])<65280)throw new Error("marker was not found");if(!(65488<=w&&w<=65495))break;u+=2}return u-c}function buildComponentData(e,w){const t=[];var{blocksPerLine:r,blocksPerColumn:a}=w,o=r<<3,s=new Int32Array(64),i=new Uint8Array(64);for(let n=0;n<a;n++){var c=n<<3;for(let e=0;e<8;e++)t.push(new Uint8Array(o));for(let e=0;e<r;e++){!function quantizeAndInverse(e,r,n){var t=w.quantizationTable;let a,o,s,i,c,l,f,d,u;const h=n;let m;for(m=0;m<64;m++)h[m]=e[m]*t[m];for(m=0;m<8;++m){var p=8*m;0===h[1+p]&&0===h[2+p]&&0===h[3+p]&&0===h[4+p]&&0===h[5+p]&&0===h[6+p]&&0===h[7+p]?(u=T*h[0+p]+512>>10,h[0+p]=u,h[1+p]=u,h[2+p]=u,h[3+p]=u,h[4+p]=u,h[5+p]=u,h[6+p]=u,h[7+p]=u):(a=T*h[0+p]+128>>8,o=T*h[4+p]+128>>8,s=h[2+p],i=h[6+p],c=x*(h[1+p]-h[7+p])+128>>8,d=x*(h[1+p]+h[7+p])+128>>8,l=h[3+p]<<4,f=h[5+p]<<4,u=a-o+1>>1,a=a+o+1>>1,o=u,u=s*C+i*P+128>>8,s=s*P-i*C+128>>8,i=u,u=c-f+1>>1,c=c+f+1>>1,f=u,u=d+l+1>>1,l=d-l+1>>1,d=u,u=a-i+1>>1,a=a+i+1>>1,i=u,u=o-s+1>>1,o=o+s+1>>1,s=u,u=c*y+d*A+2048>>12,c=c*A-d*y+2048>>12,d=u,u=l*g+f*k+2048>>12,l=l*k-f*g+2048>>12,f=u,h[0+p]=a+d,h[7+p]=a-d,h[1+p]=o+f,h[6+p]=o-f,h[2+p]=s+l,h[5+p]=s-l,h[3+p]=i+c,h[4+p]=i-c)}for(m=0;m<8;++m){var v=m;0===h[8+v]&&0===h[16+v]&&0===h[24+v]&&0===h[32+v]&&0===h[40+v]&&0===h[48+v]&&0===h[56+v]?(u=T*n[m+0]+8192>>14,h[0+v]=u,h[8+v]=u,h[16+v]=u,h[24+v]=u,h[32+v]=u,h[40+v]=u,h[48+v]=u,h[56+v]=u):(a=T*h[0+v]+2048>>12,o=T*h[32+v]+2048>>12,s=h[16+v],i=h[48+v],c=x*(h[8+v]-h[56+v])+2048>>12,d=x*(h[8+v]+h[56+v])+2048>>12,l=h[24+v],f=h[40+v],u=a-o+1>>1,a=a+o+1>>1,o=u,u=s*C+i*P+2048>>12,s=s*P-i*C+2048>>12,i=u,u=c-f+1>>1,c=c+f+1>>1,f=u,u=d+l+1>>1,l=d-l+1>>1,d=u,u=a-i+1>>1,a=a+i+1>>1,i=u,u=o-s+1>>1,o=o+s+1>>1,s=u,u=c*y+d*A+2048>>12,c=c*A-d*y+2048>>12,d=u,u=l*g+f*k+2048>>12,l=l*k-f*g+2048>>12,f=u,h[0+v]=a+d,h[56+v]=a-d,h[8+v]=o+f,h[48+v]=o-f,h[16+v]=s+l,h[40+v]=s-l,h[24+v]=i+c,h[32+v]=i-c)}for(m=0;m<64;++m){var b=128+(h[m]+8>>4);r[m]=b<0?0:255<b?255:b}}(w.blocks[n][e],i,s);let r=0;var l=e<<3;for(let e=0;e<8;e++){const f=t[c+e];for(let e=0;e<8;e++)f[l+e]=i[r++]}}}return t}class JpegStreamReader{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(n){let t=0;function readUint16(){var e=n[t]<<8|n[t+1];return t+=2,e}let e=readUint16();if(65496!==e)throw new Error("SOI not found");for(e=readUint16();65497!==e;){switch(e){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const g=function readDataBlock(){var e=readUint16(),e=n.subarray(t,t+e-2);return t+=e.length,e}();65504===e&&74===g[0]&&70===g[1]&&73===g[2]&&70===g[3]&&0===g[4]&&(this.jfif={version:{major:g[5],minor:g[6]},densityUnits:g[7],xDensity:g[8]<<8|g[9],yDensity:g[10]<<8|g[11],thumbWidth:g[12],thumbHeight:g[13],thumbData:g.subarray(14,14+3*g[12]*g[13])}),65518===e&&65===g[0]&&100===g[1]&&111===g[2]&&98===g[3]&&101===g[4]&&0===g[5]&&(this.adobe={version:g[6],flags0:g[7]<<8|g[8],flags1:g[9]<<8|g[10],transformCode:g[11]});break}case 65499:for(var r=readUint16()+t-2;t<r;){var a=n[t++];const A=new Int32Array(64);if(a>>4==0)for(let e=0;e<64;e++){var o=B[e];A[o]=n[t++]}else{if(a>>4!=1)throw new Error("DQT: invalid table spec");for(let e=0;e<64;e++){var s=B[e];A[s]=readUint16()}}this.quantizationTables[15&a]=A}break;case 65472:case 65473:case 65474:{readUint16();const y={extended:65473===e,progressive:65474===e,precision:n[t++],scanLines:readUint16(),samplesPerLine:readUint16(),components:{},componentsOrder:[]};var i=n[t++];for(let e=0;e<i;e++){var c=n[t],l=n[t+1]>>4,f=15&n[t+1],d=n[t+2];y.componentsOrder.push(c),y.components[c]={h:l,v:f,quantizationIdx:d},t+=3}!function prepareComponents(e){let r=0,n=0,t,a;for(a in e.components)e.components.hasOwnProperty(a)&&(t=e.components[a],r<t.h&&(r=t.h),n<t.v&&(n=t.v));var o=Math.ceil(e.samplesPerLine/8/r),s=Math.ceil(e.scanLines/8/n);for(a in e.components)if(e.components.hasOwnProperty(a)){t=e.components[a];var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/r),c=Math.ceil(Math.ceil(e.scanLines/8)*t.v/n),l=o*t.h,f=s*t.v;const d=[];for(let e=0;e<f;e++){const u=[];for(let e=0;e<l;e++)u.push(new Int32Array(64));d.push(u)}t.blocksPerLine=i,t.blocksPerColumn=c,t.blocks=d}e.maxH=r,e.maxV=n,e.mcusPerLine=o,e.mcusPerColumn=s}(y),this.frames.push(y);break}case 65476:var u=readUint16();for(let e=2;e<u;){var h=n[t++];const P=new Uint8Array(16);let r=0;for(let e=0;e<16;e++,t++)P[e]=n[t],r+=P[e];const C=new Uint8Array(r);for(let e=0;e<r;e++,t++)C[e]=n[t];e+=17+r,h>>4==0?this.huffmanTablesDC[15&h]=buildHuffmanTable(P,C):this.huffmanTablesAC[15&h]=buildHuffmanTable(P,C)}break;case 65501:readUint16(),this.resetInterval=readUint16();break;case 65498:{readUint16();var m=n[t++];const T=[];var p=this.frames[0];for(let e=0;e<m;e++){const x=p.components[n[t++]];var v=n[t++];x.huffmanTableDC=this.huffmanTablesDC[v>>4],x.huffmanTableAC=this.huffmanTablesAC[15&v],T.push(x)}var b=n[t++],w=n[t++],k=n[t++],b=decodeScan(n,t,p,T,this.resetInterval,b,w,k>>4,15&k);t+=b;break}case 65535:255!==n[t]&&t--;break;default:if(255===n[t-3]&&192<=n[t-2]&&n[t-2]<=254){t-=3;break}throw new Error("unknown JPEG marker "+e.toString(16))}e=readUint16()}}getResult(){var e=this["frames"];if(0===this.frames.length)throw new Error("no frames were decoded");1<this.frames.length&&console.warn("more than one frame is not supported");for(let e=0;e<this.frames.length;e++){const d=this.frames[e].components;for(const u of Object.keys(d))d[u].quantizationTable=this.quantizationTables[d[u].quantizationIdx],delete d[u].quantizationIdx}var r=e[0],{components:n,componentsOrder:t}=r;const a=[];var o=r.samplesPerLine,s=r.scanLines;for(let e=0;e<t.length;e++){var i=n[t[e]];a.push({lines:buildComponentData(0,i),scaleX:i.h/r.maxH,scaleY:i.v/r.maxV})}const c=new Uint8Array(o*s*a.length);let l=0;for(let n=0;n<s;++n)for(let r=0;r<o;++r)for(let e=0;e<a.length;++e){var f=a[e];c[l]=f.lines[0|n*f.scaleY][0|r*f.scaleX],++l}return c}}class JpegDecoder extends r.a{constructor(e){super(),this.reader=new JpegStreamReader,e.JPEGTables&&this.reader.parse(e.JPEGTables)}decodeBlock(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}},688:function(e,r,n){"use strict";function applyPredictor(n,t,a,e,o,r){if(!t||1===t)return n;for(let e=0;e<o.length;++e){if(o[e]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(o[e]!==o[0])throw new Error("When decoding with predictor, all samples must have the same size.")}var s=o[0]/8,i=2===r?1:o.length;for(let r=0;r<e&&!(r*i*a*s>=n.byteLength);++r){let e;if(2===t){switch(o[0]){case 8:e=new Uint8Array(n,r*i*a*s,i*a*s);break;case 16:e=new Uint16Array(n,r*i*a*s,i*a*s/2);break;case 32:e=new Uint32Array(n,r*i*a*s,i*a*s/4);break;default:throw new Error(`Predictor 2 not allowed with ${o[0]} bits per sample.`)}!function decodeRowAcc(r,n){let e=r.length-n,t=0;do{for(let e=n;0<e;e--)r[t+n]+=r[t],t++}while(0<(e-=n))}(e,i)}else 3===t&&!function decodeRowFloatingPoint(n,r,t){let a=0,e=n.length;for(var o=e/t;e>r;){for(let e=r;0<e;--e)n[a+r]+=n[a],++a;e-=r}var s=n.slice();for(let r=0;r<o;++r)for(let e=0;e<t;++e)n[t*r+e]=s[(t-e-1)*o+r]}(e=new Uint8Array(n,r*i*a*s,i*a*s),i,s)}return n}n.d(r,"a",function(){return basedecoder_BaseDecoder});class basedecoder_BaseDecoder{async decode(e,r){var r=await this.decodeBlock(r),n=e.Predictor||1;return 1!==n?applyPredictor(r,n,(n=!e.StripOffsets)?e.TileWidth:e.ImageWidth,n?e.TileLength:e.RowsPerStrip||e.ImageLength,e.BitsPerSample,e.PlanarConfiguration):r}}}}]);
//# sourceMappingURL=2.index.js.map