---
title: "Usage with JSON: Remote Example"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Usage with JSON: Remote Example}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

The following is an example of usage of the widget with JSON files. In this example, the JSON files are stored on a remote AWS S3 bucket. For information about remote file hosting, please visit the [Hosting Data](http://beta.vitessce.io/docs/data-hosting/) page of the main Vitessce documentation website.

To get started with this example, install the dependencies:

```r
install.packages("devtools")
devtools::install_github("vitessce/vitessce-r")
```

Next, configure the Vitessce widget. 

Add JSON files to the dataset using the `add_file` function. The `add_file` function returns the updated dataset, allowing the function calls to be chained.

```r
library(vitessce)

base_url <- "https://s3.amazonaws.com/vitessce-data/0.0.31/master_release/linnarsson/"

# Create Vitessce view config
vc <- VitessceConfig$new("Codeluppi et al., Nature Methods 2018")
dataset <- vc$add_dataset("Codeluppi")$add_file(
  url = paste0(base_url, "linnarsson.cells.json"),
  data_type = DataType$CELLS,
  file_type = FileType$CELLS_JSON
)$add_file(
  url = paste0(base_url, "linnarsson.cell-sets.json"),
  data_type = DataType$CELL_SETS,
  file_type = FileType$CELL_SETS_JSON
)
scatterplot <- vc$add_view(dataset, Component$SCATTERPLOT, mapping = "t-SNE")
status <- vc$add_view(dataset, Component$STATUS)
desc <- vc$add_view(dataset, Component$DESCRIPTION)
desc <- desc$set_props(description = "Codeluppi et al., Nature Methods 2018: Spatial organization of the somatosensory cortex revealed by osmFISH.")
cell_sets <- vc$add_view(dataset, Component$CELL_SETS)
vc$layout(hconcat(
  scatterplot,
  vconcat(cell_sets, vconcat(desc, status))
))

# Render the Vitessce widget
vc$widget(theme = "light")
```



